---
const links = [
  { href: '/', label: 'Inicio' },
  { href: '/cabanas', label: 'Cabañas' },
  { href: '/senderismo', label: 'Senderismo' },
  { href: '/dia-de-campo', label: 'Día de Campo' },
  { href: '/actividades', label: 'Actividades' },
  { href: '/contacto', label: 'Contacto' },
]
---

<header class="fixed top-0 left-0 right-0 z-40 transition-all duration-500" id="navbar">
  <nav class="max-w-6xl mx-auto px-6 lg:px-8">
    <div class="flex items-center justify-between h-20">
      <a href="/" class="font-display text-2xl font-semibold text-white tracking-wide italic drop-shadow-md">
        Finca Las Cuevas
      </a>

      <ul class="hidden lg:flex items-center gap-10">
        {links.map(link => (
          <li>
            <a
              href={link.href}
              class="text-white/80 hover:text-white text-[13px] font-medium uppercase tracking-[0.15em] transition-colors duration-300"
            >
              {link.label}
            </a>
          </li>
        ))}
      </ul>

      <button id="menu-toggle" class="lg:hidden relative w-8 h-8 flex items-center justify-center" aria-label="Abrir menú">
        <span class="absolute block w-5 h-[1.5px] bg-white transition-all duration-300 -translate-y-[5px]" id="bar1"></span>
        <span class="absolute block w-5 h-[1.5px] bg-white transition-all duration-300" id="bar2"></span>
        <span class="absolute block w-3.5 h-[1.5px] bg-white transition-all duration-300 translate-y-[5px] translate-x-[3px]" id="bar3"></span>
      </button>
    </div>
  </nav>

  <div id="mobile-menu" class="lg:hidden hidden bg-charcoal/95 backdrop-blur-sm">
    <ul class="flex flex-col px-8 py-6 gap-1">
      {links.map(link => (
        <li>
          <a
            href={link.href}
            class="block py-3 text-white/80 hover:text-white text-sm uppercase tracking-[0.15em] transition-colors border-b border-white/5 last:border-0"
          >
            {link.label}
          </a>
        </li>
      ))}
    </ul>
  </div>
</header>

<script>
  const navbar = document.getElementById('navbar')!
  const toggle = document.getElementById('menu-toggle')!
  const menu = document.getElementById('mobile-menu')!
  const bar1 = document.getElementById('bar1')!
  const bar2 = document.getElementById('bar2')!
  const bar3 = document.getElementById('bar3')!

  let isOpen = false

  window.addEventListener('scroll', () => {
    if (window.scrollY > 60) {
      navbar.style.backgroundColor = 'rgba(44,44,44,0.92)'
      navbar.style.backdropFilter = 'blur(8px)'
      navbar.style.boxShadow = '0 1px 2px rgba(0,0,0,0.1)'
    } else if (!isOpen) {
      navbar.style.backgroundColor = ''
      navbar.style.backdropFilter = ''
      navbar.style.boxShadow = ''
    }
  })

  function openMenu() {
    bar1.style.transform = 'rotate(45deg)'
    bar1.style.width = '20px'
    bar2.style.opacity = '0'
    bar3.style.transform = 'rotate(-45deg)'
    bar3.style.width = '20px'
    bar3.style.translate = '0'
  }

  function closeMenu() {
    bar1.style.transform = ''
    bar1.style.width = ''
    bar2.style.opacity = '1'
    bar3.style.transform = ''
    bar3.style.width = ''
    bar3.style.translate = ''
  }

  toggle.addEventListener('click', () => {
    isOpen = !isOpen
    menu.classList.toggle('hidden')
    if (isOpen) {
      openMenu()
      navbar.style.backgroundColor = 'rgba(44,44,44,0.92)'
    } else {
      closeMenu()
      if (window.scrollY <= 60) {
        navbar.style.backgroundColor = ''
        navbar.style.backdropFilter = ''
        navbar.style.boxShadow = ''
      }
    }
  })

  menu.querySelectorAll('a').forEach(link => {
    link.addEventListener('click', () => {
      menu.classList.add('hidden')
      isOpen = false
      closeMenu()
      if (window.scrollY <= 60) {
        navbar.style.backgroundColor = ''
        navbar.style.backdropFilter = ''
        navbar.style.boxShadow = ''
      }
    })
  })
</script>
